============================= test session starts =============================
platform win32 -- Python 3.13.3, pytest-9.0.1, pluggy-1.6.0 -- C:\Users\joshe\Desktop\Zenz\studiozens\venv\Scripts\python.exe
cachedir: .pytest_cache
django: version: 5.2.3, settings: studiozens.settings (from ini)
rootdir: C:\Users\joshe\Desktop\Zenz\studiozens
configfile: pytest.ini
plugins: anyio-4.11.0, cov-7.0.0, django-4.11.1, mock-3.15.1
collecting ... collected 42 items

marketplace/tests/tests.py::TestProductModels::test_product_str PASSED   [  2%]
marketplace/tests/tests.py::TestProductModels::test_product_defaults PASSED [  4%]
marketplace/tests/tests.py::TestProductModels::test_variant_str PASSED   [  7%]
marketplace/tests/tests.py::TestProductModels::test_variant_clean_vip_price PASSED [  9%]
marketplace/tests/tests.py::TestProductModels::test_variant_clean_vip_price_valid PASSED [ 11%]
marketplace/tests/tests.py::TestCartModels::test_cart_str PASSED         [ 14%]
marketplace/tests/tests.py::TestCartModels::test_cart_item_str PASSED    [ 16%]
marketplace/tests/tests.py::TestCartModels::test_unique_variant_in_cart PASSED [ 19%]
marketplace/tests/tests.py::TestCartExpiration::test_get_cart_replaces_expired_cart PASSED [ 21%]
marketplace/tests/tests.py::TestCartExpiration::test_add_item_extends_cart_expiry FAILED [ 23%]
marketplace/tests/tests.py::TestCartExpiration::test_cleanup_expired_carts_task PASSED [ 26%]
marketplace/tests/tests.py::TestOrderModels::test_order_str PASSED       [ 28%]
marketplace/tests/tests.py::TestOrderModels::test_order_item_clean PASSED [ 30%]
marketplace/tests/tests.py::TestOrderCreationService::test_create_order_success PASSED [ 33%]
marketplace/tests/tests.py::TestOrderCreationService::test_create_order_empty_cart PASSED [ 35%]
marketplace/tests/tests.py::TestOrderCreationService::test_create_order_insufficient_stock PASSED [ 38%]
marketplace/tests/tests.py::TestOrderCreationService::test_create_order_with_vip_price PASSED [ 40%]
marketplace/tests/tests.py::TestOrderCreationService::test_create_order_delivery_dates PASSED [ 42%]
marketplace/tests/tests.py::TestOrderService::test_confirm_payment_success PASSED [ 45%]
marketplace/tests/tests.py::TestOrderService::test_confirm_payment_amount_mismatch PASSED [ 47%]
marketplace/tests/tests.py::TestOrderService::test_confirm_payment_price_change_check PASSED [ 50%]
marketplace/tests/tests.py::TestOrderService::test_transition_invalid PASSED [ 52%]
marketplace/tests/tests.py::TestOrderService::test_cancel_releases_stock PASSED [ 54%]
marketplace/tests/tests.py::TestReturnService::test_request_return_success PASSED [ 57%]
marketplace/tests/tests.py::TestReturnService::test_process_return_approval PASSED [ 59%]
marketplace/tests/tests.py::TestReturnService::test_process_return_rejection PASSED [ 61%]
marketplace/tests/tests.py::TestSerializers::test_product_list_serializer PASSED [ 64%]
marketplace/tests/tests.py::TestSerializers::test_cart_item_create_serializer_validation PASSED [ 66%]
marketplace/tests/tests.py::TestSerializers::test_checkout_serializer_validation PASSED [ 69%]
marketplace/tests/tests.py::TestTasks::test_notify_order_status_change PASSED [ 71%]
marketplace/tests/tests.py::TestTasks::test_release_expired_order_reservations PASSED [ 73%]
marketplace/tests/tests.py::TestViews::test_product_list_view PASSED     [ 76%]
marketplace/tests/tests.py::TestViews::test_cart_add_item_view PASSED    [ 78%]
marketplace/tests/tests.py::TestViews::test_checkout_view PASSED         [ 80%]
marketplace/tests/tests.py::TestViews::test_order_list_view PASSED       [ 83%]
marketplace/tests/tests.py::TestViews::test_request_return_view PASSED   [ 85%]
marketplace/tests/tests.py::TestMarketplaceSecurityAndAdminEndpoints::test_anonymous_product_list_masks_sensitive_fields PASSED [ 88%]
marketplace/tests/tests.py::TestMarketplaceSecurityAndAdminEndpoints::test_authenticated_user_sees_sensitive_fields PASSED [ 90%]
marketplace/tests/tests.py::TestMarketplaceSecurityAndAdminEndpoints::test_cart_my_cart_endpoint_returns_payload PASSED [ 92%]
marketplace/tests/tests.py::TestMarketplaceSecurityAndAdminEndpoints::test_staff_order_list_is_restricted PASSED [ 95%]
marketplace/tests/tests.py::TestMarketplaceSecurityAndAdminEndpoints::test_admin_product_crud_endpoint PASSED [ 97%]
marketplace/tests/tests.py::TestMarketplaceSecurityAndAdminEndpoints::test_inventory_movement_endpoint_updates_stock PASSED [100%]

================================== FAILURES ===================================
____________ TestCartExpiration.test_add_item_extends_cart_expiry _____________
marketplace\tests\tests.py:169: in test_add_item_extends_cart_expiry
    response = view.add_item(request)
               ^^^^^^^^^^^^^^^^^^^^^^
core\decorators.py:27: in wrapped
    return view_func(self, request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Local\Programs\Python\Python313\Lib\contextlib.py:85: in inner
    return func(*args, **kwds)
           ^^^^^^^^^^^^^^^^^^^
marketplace\views.py:236: in add_item
    serializer = CartItemCreateUpdateSerializer(data=request.data)
                                                     ^^^^^^^^^^^^
E   AttributeError: 'WSGIRequest' object has no attribute 'data'
=========================== short test summary info ===========================
FAILED marketplace/tests/tests.py::TestCartExpiration::test_add_item_extends_cart_expiry - AttributeError: 'WSGIRequest' object has no attribute 'data'
================== 1 failed, 41 passed, 2 warnings in 29.71s ==================
