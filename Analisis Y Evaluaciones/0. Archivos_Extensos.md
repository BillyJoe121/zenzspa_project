- **profiles/views.py — 669 líneas**  
  - Subdividir: `profiles/views/kiosk.py`, `profiles/views/profile.py`, `profiles/views/sessions.py`.  
  - Afectados: `profiles/urls.py`, tests de profiles.

- **profiles/models.py — 435 líneas**  
  - Subdividir: `models/profile.py`, `models/kiosk.py`, `models/sessions.py`.  
  - Afectados: migraciones, admin, serializers, views; reexportar en `__init__.py`.





- **users/views.py — 630 líneas**  
  - Subdividir: autenticación/OTP, gestión de sesiones, flag CNG, export, twilio webhook.  
  - Afectados: `users/urls.py`, tests de views, serializers; revisar permisos por módulo.

- **marketplace/services.py — 620 líneas**  
  - Subdividir: `services/order_creation.py`, `services/order_state.py`, `services/notifications.py`, `services/returns.py`, `services/inventory.py`.  
  - Afectados: `marketplace/tasks.py`, views, tests; reexportar desde `services/__init__.py`.

- **core/models.py — 508 líneas**  
  - Subdividir: `core/models/base.py` (BaseModel, mixins), `core/models/audit.py` (AuditLog), `core/models/idempotency.py`, `core/models/settings.py` (GlobalSettings).  
  - Afectados: todos los imports de modelos core, migraciones; reexportar en `core/models/__init__.py`.

- **analytics/views.py — 408 líneas**  
  - Subdividir: `views/events.py` (tracking), `views/reports.py` (reportes), `views/exports.py`.  
  - Afectados: `analytics/urls.py`, tests de analytics.






bot/views/webhook.py – ~37.7 KB
spa/services/payments.py – ~32.4 KB
spa/views/appointments.py – ~26.2 KB
profiles/views.py – ~26.1 KB
users/views.py – ~25.5 KB
marketplace/services.py – ~25.1 KB
finances/gateway.py – ~20.7 KB
studiozens/settings/base.py – ~19.6 KB
core/models.py – ~19.5 KB
spa/services/appointments.py – ~19.0 KB
analytics/views.py – ~17.3 KB
profiles/models.py – ~15.7 KB








- **core/tests/test_logging_filters.py — 583 líneas**  
  - Subdividir: filtros de PII, sanitización Twilio, sanitización Wompi, logging estructurado.  
  - Afectados: solo tests; reutilizar fixtures en `conftest.py`.

- **bot/tests/test_handoff_sad_paths.py — 653 líneas**  
  - Subdividir: escenarios sin auth, escenarios con data inválida, flujos de expiración.  
  - Afectados: solo tests.

  - **profiles/tests/test_critical.py — 1206 líneas**  
  - Subdividir: por feature (`test_profile_update.py`, `test_kiosk_flow.py`, `test_permissions.py`).  
  - Afectados: solo rutas de tests; asegurarse de mantener fixtures compartidas en `conftest.py`.

- **users/tests/tests.py — 947 líneas**  
  - Subdividir: autenticación/OTP, recuperación de contraseña, bloqueo/IP rate limit, verificación Twilio.  
  - Afectados: solo tests; mover factories/fixtures a `users/tests/conftest.py`.

- **bot/tests/test_admin.py — 875 líneas**  
  - Subdividir: admin de configuración, de logs, de handoffs, de seguridad.  
  - Afectados: solo tests.
  
- **bot/tests/test_views.py — 572 líneas**  
  - Subdividir: éxito webhook, bloqueos seguridad, throttling, handoff trigger, deduplicación.  
  - Afectados: solo tests.

- **studiozens/tests/test_settings.py — 540 líneas**  
  - Subdividir: tests de env vars, security settings, celery config, logging config.  
  - Afectados: solo tests.

- **bot/tests/test_handoff_api.py — 532 líneas**  
  - Subdividir: crear handoff, asignar, resolver, auditoría.  
  - Afectados: solo tests.

- **marketplace/tests/tests.py — 519 líneas**  
  - Subdividir: creación de órdenes, transición de estado, notificaciones, returns.  
  - Afectados: solo tests.

- **bot/tests/test_suspicious_activity_detector.py — 401 líneas**  
  - Subdividir: detección por contenido, por IP, umbrales/acciones.  
  - Afectados: solo tests.

- **notifications/tests/test_notifications.py — 379 líneas**  
  - Subdividir: preferencias, servicio, renderer, logs.  
  - Afectados: solo tests.

- **bot/tests/test_anonymous_user_sad_paths.py — 378 líneas**  
  - Subdividir: creación de anonymous, expiración, abuso.  
  - Afectados: solo tests.

  
- **bot/tests/test_security_fixes.py — 453 líneas**  
  - Subdividir: por fix (jailbreak, rate limit, bloqueo IP, throttling).  
  - Afectados: solo tests.

- **marketplace/tests/test_sad_paths.py — 372 líneas**  
  - Subdividir: creación/stock, estados, devoluciones, notificaciones.  
  - Afectados: solo tests.


- **bot/tests/test_tasks.py — 365 líneas**  
  - Subdividir: rate limit, procesado de mensaje, monitoreo de costos, excepciones.  
  - Afectados: solo tests.