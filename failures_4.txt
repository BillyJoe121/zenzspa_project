============================= test session starts =============================
platform win32 -- Python 3.13.3, pytest-9.0.1, pluggy-1.6.0 -- C:\Users\joshe\Desktop\Zenz\studiozens\venv\Scripts\python.exe
cachedir: .pytest_cache
django: version: 5.2.3, settings: studiozens.settings (from ini)
rootdir: C:\Users\joshe\Desktop\Zenz\studiozens
configfile: pytest.ini
plugins: anyio-4.11.0, cov-7.0.0, django-4.11.1, mock-3.15.1
collecting ... collected 54 items

finances/tests/test_serializers.py::CommissionLedgerSerializerTest::test_get_pending_amount PASSED [  1%]
finances/tests/test_serializers.py::PaymentSerializerTest::test_payment_serializer_fields PASSED [  3%]
finances/tests/test_serializers.py::FinancialAdjustmentCreateSerializerTest::test_invalid_payment PASSED [  5%]
finances/tests/test_serializers.py::FinancialAdjustmentCreateSerializerTest::test_invalid_user PASSED [  7%]
finances/tests/test_serializers.py::FinancialAdjustmentCreateSerializerTest::test_valid_data PASSED [  9%]
finances/tests/test_serializers.py::ClientCreditAdminSerializerTest::test_create_sets_default_remaining PASSED [ 11%]
finances/tests/test_serializers.py::ClientCreditAdminSerializerTest::test_validate_remaining_greater_than_initial PASSED [ 12%]
finances/tests/test_serializers.py::ClientCreditAdminSerializerTest::test_validate_remaining_negative PASSED [ 14%]
finances/tests/test_views_extended.py::CommissionLedgerListViewTest::test_filter_by_date_range FAILED [ 16%]
finances/tests/test_views_extended.py::CommissionLedgerListViewTest::test_filter_by_status FAILED [ 18%]
finances/tests/test_views_extended.py::DeveloperCommissionStatusViewTest::test_get_status_exception_handling PASSED [ 20%]
finances/tests/test_views_extended.py::DeveloperCommissionStatusViewTest::test_get_status_success PASSED [ 22%]
finances/tests/test_views_extended.py::ClientCreditAdminViewSetTest::test_create_credit_computes_status PASSED [ 24%]
finances/tests/test_views_extended.py::ClientCreditAdminViewSetTest::test_update_credit_recomputes_status PASSED [ 25%]
finances/tests/test_payments_extended.py::PaymentServiceExtendedTest::test_build_customer_data PASSED [ 27%]
finances/tests/test_payments_extended.py::PaymentServiceExtendedTest::test_build_tax_payload PASSED [ 29%]
finances/tests/test_payments_extended.py::PaymentServiceExtendedTest::test_charge_recurrence_token_validations PASSED [ 31%]
finances/tests/test_payments_extended.py::PaymentServiceExtendedTest::test_create_bancolombia_transfer_payment PASSED [ 33%]
finances/tests/test_payments_extended.py::PaymentServiceExtendedTest::test_create_daviplata_payment PASSED [ 35%]
finances/tests/test_payments_extended.py::PaymentServiceExtendedTest::test_create_nequi_payment PASSED [ 37%]
finances/tests/test_payments_extended.py::PaymentServiceExtendedTest::test_create_pse_payment PASSED [ 38%]
finances/tests/test_payments_extended.py::PaymentServiceExtendedTest::test_create_pse_payment_invalid_status PASSED [ 40%]
finances/tests/test_payments_extended.py::PaymentServiceExtendedTest::test_send_payment_status_notification PASSED [ 42%]
finances/tests/test_webhooks_extended.py::WompiWebhookServiceExtendedTest::test_process_payout_update_approved PASSED [ 44%]
finances/tests/test_webhooks_extended.py::WompiWebhookServiceExtendedTest::test_process_payout_update_declined PASSED [ 46%]
finances/tests/test_webhooks_extended.py::WompiWebhookServiceExtendedTest::test_process_payout_update_missing_id PASSED [ 48%]
finances/tests/test_webhooks_extended.py::WompiWebhookServiceExtendedTest::test_process_token_update_missing_id PASSED [ 50%]
finances/tests/test_webhooks_extended.py::WompiWebhookServiceExtendedTest::test_process_token_update_success PASSED [ 51%]
finances/tests/test_gateway_extended.py::WompiGatewayExtendedTest::test_circuit_breaker PASSED [ 53%]
finances/tests/test_gateway_extended.py::WompiGatewayExtendedTest::test_request_with_retry_max_retries PASSED [ 55%]
finances/tests/test_gateway_extended.py::WompiGatewayExtendedTest::test_request_with_retry_success PASSED [ 57%]
finances/tests/test_gateway_extended.py::WompiGatewayExtendedTest::test_request_with_retry_timeout_then_success PASSED [ 59%]
finances/tests/test_gateway_extended.py::WompiPaymentClientExtendedTest::test_create_payment_source_error PASSED [ 61%]
finances/tests/test_gateway_extended.py::WompiPaymentClientExtendedTest::test_create_payment_source_from_token PASSED [ 62%]
finances/tests/test_gateway_extended.py::WompiPaymentClientExtendedTest::test_tokenize_card_error PASSED [ 64%]
finances/tests/test_gateway_extended.py::WompiPaymentClientExtendedTest::test_tokenize_card_success PASSED [ 66%]
finances/tests/test_services.py::WompiDisbursementClientTest::test_create_payout_error PASSED [ 68%]
finances/tests/test_services.py::WompiDisbursementClientTest::test_create_payout_success PASSED [ 70%]
finances/tests/test_services.py::WompiDisbursementClientTest::test_get_available_balance_error PASSED [ 72%]
finances/tests/test_services.py::WompiDisbursementClientTest::test_get_available_balance_success PASSED [ 74%]
finances/tests/test_services.py::DeveloperCommissionServiceTest::test_evaluate_payout_below_threshold PASSED [ 75%]
finances/tests/test_services.py::DeveloperCommissionServiceTest::test_evaluate_payout_success PASSED [ 77%]
finances/tests/test_services.py::DeveloperCommissionServiceTest::test_get_developer_debt PASSED [ 79%]
finances/tests/test_services.py::DeveloperCommissionServiceTest::test_register_commission PASSED [ 81%]
finances/tests/test_services.py::FinancialAdjustmentServiceTest::test_create_adjustment_credit PASSED [ 83%]
finances/tests/test_services.py::FinancialAdjustmentServiceTest::test_create_adjustment_limit_exceeded PASSED [ 85%]
finances/tests/test_services.py::CreditManagementServiceTest::test_apply_cancellation_penalty PASSED [ 87%]
finances/tests/test_services.py::CreditManagementServiceTest::test_issue_credit_from_appointment PASSED [ 88%]
finances/tests/test_tasks.py::FinancesTasksTest::test_check_pending_payments PASSED [ 90%]
finances/tests/test_tasks.py::FinancesTasksTest::test_cleanup_old_webhook_events PASSED [ 92%]
finances/tests/test_tasks.py::FinancesTasksTest::test_downgrade_expired_vips PASSED [ 94%]
finances/tests/test_tasks.py::FinancesTasksTest::test_process_recurring_subscriptions_failure PASSED [ 96%]
finances/tests/test_tasks.py::FinancesTasksTest::test_process_recurring_subscriptions_success PASSED [ 98%]
finances/tests/test_tasks.py::FinancesTasksTest::test_reconcile_recent_payments PASSED [100%]

================================== FAILURES ===================================
___________ CommissionLedgerListViewTest.test_filter_by_date_range ____________
finances\tests\test_views_extended.py:30: in test_filter_by_date_range
    self.assertEqual(response.data["results"][0]["id"], self.ledger1.id)
E   AssertionError: '47ba1183-7fa7-4e8c-aaa0-b4dce5bb59c2' != UUID('47ba1183-7fa7-4e8c-aaa0-b4dce5bb59c2')
---------------------------- Captured stderr call -----------------------------
[DEBUG] 
def notify_order_status_change(order_id, new_status):
    return 1

[DEBUG] 
def release_expired_order_reservations():
    return 1

[DEBUG] 
def cleanup_expired_carts():
    return 1

------------------------------ Captured log call ------------------------------
DEBUG    celery.utils.functional:functional.py:335 
def notify_order_status_change(order_id, new_status):
    return 1

DEBUG    celery.utils.functional:functional.py:335 
def release_expired_order_reservations():
    return 1

DEBUG    celery.utils.functional:functional.py:335 
def cleanup_expired_carts():
    return 1
_____________ CommissionLedgerListViewTest.test_filter_by_status ______________
finances\tests\test_views_extended.py:23: in test_filter_by_status
    self.assertEqual(response.data["results"][0]["id"], self.ledger1.id)
E   AssertionError: 'de2c8e29-9365-48d4-958c-80c3eb99821e' != UUID('de2c8e29-9365-48d4-958c-80c3eb99821e')
=========================== short test summary info ===========================
FAILED finances/tests/test_views_extended.py::CommissionLedgerListViewTest::test_filter_by_date_range - AssertionError: '47ba1183-7fa7-4e8c-aaa0-b4dce5bb59c2' != UUID('47ba1183-7fa7-4e8c-aaa0-b4dce5bb59c2')
FAILED finances/tests/test_views_extended.py::CommissionLedgerListViewTest::test_filter_by_status - AssertionError: 'de2c8e29-9365-48d4-958c-80c3eb99821e' != UUID('de2c8e29-9365-48d4-958c-80c3eb99821e')
================== 2 failed, 52 passed, 5 warnings in 9.20s ===================
